<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="stylesheet" href="/assets/css/just-the-docs-light.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <script src="/assets/js/custom.js"></script> <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML"> </script><meta name="viewport" content="width=device-width, initial-scale=1"><title>Mini Project 1 | Operating Systems and Networks</title><meta name="generator" content="Jekyll v3.9.2" /><meta property="og:title" content="Mini Project 1" /><meta name="author" content="Karthik Vaidhyanathann" /><meta property="og:locale" content="en_US" /><meta name="description" content="This is the website of the course offered by IIIT Hyderabad" /><meta property="og:description" content="This is the website of the course offered by IIIT Hyderabad" /><link rel="canonical" href="http://0.0.0.0:4000/mini-projects/mini-project1" /><meta property="og:url" content="http://0.0.0.0:4000/mini-projects/mini-project1" /><meta property="og:site_name" content="Operating Systems and Networks" /><meta property="og:type" content="website" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Mini Project 1" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Karthik Vaidhyanathann"},"description":"This is the website of the course offered by IIIT Hyderabad","headline":"Mini Project 1","url":"http://0.0.0.0:4000/mini-projects/mini-project1"}</script><body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="/" class="site-title lh-tight"> Operating Systems and Networks </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="/home/" class="nav-list-link">Home</a><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Lectures category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/lectures/" class="nav-list-link">Lectures</a><ul class="nav-list "><li class="nav-list-item "><a href="/lectures/week-1" class="nav-list-link">Week 1 - Introduction to Course Overview and Process Virtualization</a><li class="nav-list-item "><a href="/lectures/week-2" class="nav-list-link">Week 2 - Introduction to Course Overview and Process Virtualization</a><li class="nav-list-item "><a href="/lectures/week-3" class="nav-list-link">Week 3 - Proess Virutalization and Introduction to Computer Networks</a><li class="nav-list-item "><a href="/lectures/week-4" class="nav-list-link">Week 4 - Transport Layer</a></ul><li class="nav-list-item active"><a href="#" class="nav-list-expander" aria-label="toggle links in Mini Projects category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/mini-projects/" class="nav-list-link">Mini Projects</a><ul class="nav-list "><li class="nav-list-item "><a href="/mini-projects/assignment0" class="nav-list-link">Assignment 0</a><li class="nav-list-item active"><a href="/mini-projects/mini-project1" class="nav-list-link active">Mini Project 1</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in PYQs category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/pyqs/" class="nav-list-link">PYQs</a><ul class="nav-list "><li class="nav-list-item "><a href="/pyqs/quiz-1/" class="nav-list-link">Quiz 1</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Tutorials category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/tutorial/" class="nav-list-link">Tutorials</a><ul class="nav-list "><li class="nav-list-item "><a href="/tutorial/tutorial-1" class="nav-list-link">Tutorial 1 - Introduction to System Calls</a><li class="nav-list-item "><a href="/tutorial/tutorial-2" class="nav-list-link">Tutorial 2 - Networks</a><li class="nav-list-item "><a href="/tutorial/tutorial-3" class="nav-list-link">Tutorial 3 - Basics of xv6 and CFS</a></ul><li class="nav-list-item"><a href="/course_policy/" class="nav-list-link">Course Policy</a><li class="nav-list-item"><a href="/calendar/" class="nav-list-link">Calendar</a><li class="nav-list-item"><a href="/staff/" class="nav-list-link">Staff</a></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Operating Systems and Networks" aria-label="Search Operating Systems and Networks" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div><button id="theme-toggle" class="site-button" aria-pressed="false" title="Toggle dark mode" style="background: transparent; border: none; cursor: pointer;"> 🌞 </button><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a href="https://karthikvaidhyanathan.com" class="site-button" > Karthik Vaidhyanathann </a><li class="aux-nav-list-item"> <a href="https://courses.iiit.ac.in" class="site-button" > Moodle </a></ul></nav></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="/mini-projects/">Mini Projects</a><li class="breadcrumb-nav-list-item"><span>Mini Project 1</span></ol></nav><div id="main-content" class="main-content" role="main"><h1 id="before-you-start"> <a href="#before-you-start" class="anchor-heading" aria-labelledby="before-you-start"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Before You Start</h1><h2 id="deadline"> <a href="#deadline" class="anchor-heading" aria-labelledby="deadline"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Deadline</h2><p>The deadline for this assignment is <strong>Thursday, September 11, 2025 23:59:59 IST</strong>.</p><h2 id="grading"> <a href="#grading" class="anchor-heading" aria-labelledby="grading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Grading</h2><p>Marks are divided into 2 categories</p><ul><li><strong>I/O Evaluation</strong><ul><li>This component will be <strong>automatically evaluated</strong>.<li>Your shell will be tested on a common testing environment.<li>This will be done in a similar manner to how OJ worked in CPro and DSA.</ul><li><strong>Code Evaluation</strong><ul><li>This component will be <strong>manually evaluated</strong>.<li>Your code and understanding will be evaluated by TAs during an in-person viva.</ul></ul><p>If you are using LLMs for any portion of the code,</p><ul><li>Enclose the LLM generated portion as below,<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>############## LLM Generated Code Begins ##############
some llm generated code
############## LLM Generated Code Ends ################
</code></pre></div></div><li>Provide the exact prompts and LLM responses as image files in a folder called <code class="language-plaintext highlighter-rouge">llm_completions/</code></ul><h2 id="notes-regarding-grading"> <a href="#notes-regarding-grading" class="anchor-heading" aria-labelledby="notes-regarding-grading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Notes Regarding Grading</h2><ul><li>In the in-person code evaluation, you will be tested <strong>solely on the understanding of your code</strong>.<li>The exact weightage will be released shortly, but note that the in-person code evaluation <strong>will hold more weightage</strong> than the automated evaluation.<li>Since evaluation of the correctness of your code will be automatically evaluated, <strong>you must ensure that your shell strictly follows the input and output requirements mentioned in this document</strong>.<li>Failure to follow input/output formats will likely lead to <strong>a score of zero</strong> in the automatic evaluation. No queries will be entertained.<li>A sample testing script will be released shortly that will contain sample test cases that you may use to check whether your shell follows the specified input/output format. Note that these test cases are <strong>a small subset of the ones used in the automatic evaluation</strong>.</ul><h2 id="notes-regarding-queries"> <a href="#notes-regarding-queries" class="anchor-heading" aria-labelledby="notes-regarding-queries"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Notes Regarding Queries</h2><ul><li>Before asking a doubt please thoroughly read through the requirements.<li>If a doubt is already answered by the requirements, it <strong>will not be answered.</strong><li>You may only ask doubts regarding input/output formats.<li>For all other doubts, <strong>make reasonable assumptions.</strong></ul><h1 id="c-shell-total-645"> <a href="#c-shell-total-645" class="anchor-heading" aria-labelledby="c-shell-total-645"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> C Shell [Total: 645]</h1><h2 id="general-requirements"> <a href="#general-requirements" class="anchor-heading" aria-labelledby="general-requirements"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> General Requirements</h2><ul><li>The project must be broken down into multiple .c and .h files based on functionality. Monolithic code in a single file will be heavily penalized.<li>You may only use the C POSIX library headers and functions. The documentation for these are provided here - https://pubs.opengroup.org/onlinepubs/9699919799/idx/head.html.<li>Use the below <code class="language-plaintext highlighter-rouge">gcc</code> feature flags while compiling to ensure POSIX compliance.<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcc -std=c99 \
  -D_POSIX_C_SOURCE=200809L \
  -D_XOPEN_SOURCE=700 \
  -Wall -Wextra -Werror \
  -Wno-unused-parameter \
  -fno-asm \
  your_file.c
</code></pre></div></div><li>Your final code submission <strong>must</strong> be compilable using the command <code class="language-plaintext highlighter-rouge">make all</code> in the root directory of the git repository. It <strong>must</strong> compile the shell to the file <code class="language-plaintext highlighter-rouge">shell.out</code>. If not done, this would cause automatic evaluation to fail, leading to zero marks. A test script will be provided soon. This binary should be created in the <strong>shell directory</strong>, and not the project root.</ul><h2 id="part-a-shell-input-total-65"> <a href="#part-a-shell-input-total-65" class="anchor-heading" aria-labelledby="part-a-shell-input-total-65"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Part A: Shell Input [Total: 65]</h2><p>This is the base for the rest of the assignment. Work hard on this!</p><h3 id="a1-the-shell-prompt-10"> <a href="#a1-the-shell-prompt-10" class="anchor-heading" aria-labelledby="a1-the-shell-prompt-10"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A.1: The Shell Prompt [10]</h3><p>Your shell should show a prompt so that the user knows that they can provide input to it. Successfully completing most of this requirement merely requires your shell to display the below prompt!</p><p><code class="language-plaintext highlighter-rouge">&lt;Username@SystemName:current_path&gt;</code></p><p>Find out what Username and SystemName are by investigating the bash (or zsh, etc.) prompt that you see in your computer’s shell. Unix only, sorry non-WSL Windows users :(</p><h4 id="requirements"> <a href="#requirements" class="anchor-heading" aria-labelledby="requirements"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements</h4><ol><li>The shell should display the above prompt when it is not running a foreground process.<li>The directory in which the shell is started becomes the shell’s home directory.<li>When the current working directory has the home directory as an ancestor (for example <code class="language-plaintext highlighter-rouge">/path/to/home/meow</code>), the absolute path to the home directory must be replaced by a tilde “~”. So the example would be displayed as <code class="language-plaintext highlighter-rouge">~/meow</code>.<li>When the current working directory does not have the home directory as an ancestor (for example <code class="language-plaintext highlighter-rouge">/path/to/not_home/meow</code>) the absolute path should be displayed as is. So the example would be displayed as <code class="language-plaintext highlighter-rouge">/path/to/not_home/meow</code>.</ol><h4 id="example"> <a href="#example" class="anchor-heading" aria-labelledby="example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example</h4><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># I am currently running bash
[rudy@iiit ~/osnmp1/]$ make
[rudy@iiit ~/osnmp1/]$ ./shell.out
# I am now running my shell
&lt;rudy@iiit:~&gt;
</code></pre></div></div><h3 id="a2-user-input-5"> <a href="#a2-user-input-5" class="anchor-heading" aria-labelledby="a2-user-input-5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A.2: User Input [5]</h3><p>A shell’s job is to take input from a user, parse it, and then run any commands if necessary. For now, after taking input from a user, the shell doesn’t have to do anything with the input! So successfully completing this requirement merely requires your shell to be able to take user input!</p><h4 id="requirements-1"> <a href="#requirements-1" class="anchor-heading" aria-labelledby="requirements-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements</h4><ol><li>The shell should allow a user to type input.<li>When the user presses the enter/return key, the shell should consume the input.<li>After consuming the input, the shell should once again display the shell prompt. The user should again be able to type input and submit it (by pressing the enter/return key).</ol><h4 id="example-1"> <a href="#example-1" class="anchor-heading" aria-labelledby="example-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example</h4><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;rudy@iiit:~&gt; Hi there guys!
&lt;rudy@iiit:~&gt; This shell is cool!
&lt;rudy@iiit:~&gt;
</code></pre></div></div><h3 id="a3-input-parsing-50"> <a href="#a3-input-parsing-50" class="anchor-heading" aria-labelledby="a3-input-parsing-50"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A.3: Input Parsing [50]</h3><p>After taking user input, the input must be parsed so that we can decide what the user wants the shell to do. You will be implementing a parser for the below Context Free Grammar</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shell_cmd  -&gt;  cmd_group ((&amp; | ;) cmd_group)* &amp;?
cmd_group -&gt;  atomic (\| atomic)*
atomic -&gt; name (name | input | output)*
input -&gt; &lt; name | &lt;name
output -&gt; &gt; name | &gt;name | &gt;&gt; name | &gt;&gt;name
name -&gt; r"[^|&amp;&gt;&lt;;]+"
</code></pre></div></div><p>Below is another version of the <strong>same grammar</strong>, but provided in a pure regex format. This is to clarify that in the above grammar, <strong>anywhere there is a space, you must handle an arbitrary amount of whitespace</strong>. Note the usage of ‘*’ and ‘+’.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shell_cmd  -&gt;  r"(?P&lt;cmd_group1&gt;.+)(?P&lt;WS1&gt;\s*)((&amp;|;)(?P&lt;WS2&gt;\s*)(?P&lt;cmd_group2&gt;.+))*(?P&lt;WS3&gt;\s*)&amp;?"
cmd_group -&gt;  r"(?P&lt;atomic1&gt;.+)(?P&lt;WS1&gt;\s*)(\|(?P&lt;WS2&gt;\s*)(?P&lt;atomic2&gt;.+))*"
atomic -&gt; r"(?P&lt;NAME1&gt;[^|&amp;&gt;&lt;;]+)(?P&lt;WS1&gt;\s+)((?P&lt;NAME2&gt;[^|&amp;&gt;&lt;;]+)|(?P&lt;input&gt;.+)|(?P&lt;output&gt;.+))*"
input -&gt; r"&lt;(?P&lt;WS&gt;\s*)(?P&lt;NAME&gt;[^|&amp;&gt;&lt;;]+)"
output -&gt; r"(&gt;|&gt;&gt;)(?P&lt;WS&gt;\s*)(?P&lt;NAME&gt;[^|&amp;&gt;&lt;;]+)"
</code></pre></div></div><p>Instead of attempting to understand any of these regexes, I highly recommend copying the regex (the text between the double quotes) and pasting it into <a href="https://regex101.com/">Regex101</a>. Ensure that you select the flavor to be ‘Python’ and that you disable the ‘global’ and ‘multiline’ options which are auto enabled in the ‘Regex Flags’ menu. An explanation for the provided regex can be seen on the right hand side.</p><p>A simple introduction to Context Free Grammars and an example parser for a simpler grammar will be provided in the tutorial.</p><p>Parsers for such programs usually create something called an Abstract Syntax Tree. However, you are not required to parse the input into an AST. You can use any structure that you find the most convenient!</p><h4 id="requirements-2"> <a href="#requirements-2" class="anchor-heading" aria-labelledby="requirements-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements</h4><ol><li>The shell should verify whether or not an inputted command is valid or invalid using the rules of the grammar.<li>If a command is valid, do nothing (for now)! For example, <code class="language-plaintext highlighter-rouge">cat meow.txt | meow; meow &gt; meow.txt &amp;</code> is a valid command.<li>If a command is invalid, print “Invalid Syntax!”. For example, <code class="language-plaintext highlighter-rouge">cat meow.txt | ; meow</code> is an invalid command.<li>Your parser should ignore whitespace characters (space, tab (\t), new line (\n), and carriage return (\r)) in between valid tokens.</ol><h4 id="example-2"> <a href="#example-2" class="anchor-heading" aria-labelledby="example-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example</h4><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># This is valid syntax
&lt;rudy@iiit:~&gt; Hi there guys!
# This isn't
&lt;rudy@iiit:~&gt; cat meow.txt | ; meow
Invalid Syntax!
&lt;rudy@iiit:~&gt;
</code></pre></div></div><h2 id="part-b-shell-intrinsics-total-70"> <a href="#part-b-shell-intrinsics-total-70" class="anchor-heading" aria-labelledby="part-b-shell-intrinsics-total-70"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Part B: Shell Intrinsics [Total: 70]</h2><p>These are commands that any shell worth its salt supports! Implementing them shouldn’t be too difficult.</p><p><strong>Banned Syscalls for Part B</strong>: <code class="language-plaintext highlighter-rouge">exec*</code>, i.e. any of the syscalls whose names start with exec.</p><h3 id="b1-hop-20"> <a href="#b1-hop-20" class="anchor-heading" aria-labelledby="b1-hop-20"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> B.1: hop [20]</h3><p><strong>Syntax</strong>: <code class="language-plaintext highlighter-rouge">hop ((~ | . | .. | - | name)*)?</code></p><p><strong>Purpose</strong>: The hop command allows a user to change the shell’s current working directory.</p><h4 id="requirements-3"> <a href="#requirements-3" class="anchor-heading" aria-labelledby="requirements-3"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements</h4><p>Execute one of the following operations sequentially for each passed argument:</p><ol><li>”~” or No Arguments: Change the CWD to the shell’s home directory.<li>”.”: Do nothing (i.e. stay in the same CWD)<li>”..”: Change the CWD to the parent directory of the CWD, or do nothing if the CWD has no parent directory.<li>”-“: Change the CWD to the previous CWD or do nothing if there was no previous CWD. So, after starting the shell, till the first hop command which was not a “-“ was run, you must do nothing.<li>“name”: Change the CWD to the specified relative or absolute path.<li>If the directory does not exist, output “No such directory!”</ol><h4 id="example-3"> <a href="#example-3" class="anchor-heading" aria-labelledby="example-3"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example</h4><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;rudy@iiit:~/osnmp1&gt; hop ~
&lt;rudy@iiit:~&gt; hop ..
&lt;rudy@iiit:/home/&gt; hop rudy/osnmp1 .. -
&lt;rudy@iiit:~/osnmp1&gt;
</code></pre></div></div><h3 id="b2-reveal-20"> <a href="#b2-reveal-20" class="anchor-heading" aria-labelledby="b2-reveal-20"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> B.2: reveal [20]</h3><p><strong>Syntax</strong>: <code class="language-plaintext highlighter-rouge">reveal (-(a | l)*)* (~ | . |.. | - | name)?</code></p><p><strong>Purpose</strong>: The reveal command allows a user to view the files and directories in a directory.</p><h4 id="requirements-4"> <a href="#requirements-4" class="anchor-heading" aria-labelledby="requirements-4"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements</h4><p>Flags modify the default behavior of reveal.</p><ol><li>“a”: When this flag is set, reveal all files and directories, including hidden ones (files and directories starting with .). The default behavior is to not reveal hidden files and directories.<li>“l”: When this flag is set, reveal files and directories in a line by line format, i.e. only one entry per line.<li>When both flags are set, all files and directories, including hidden ones, must be printed in the line by line format.<li>When neither flag is set, print files and directories in the format of <code class="language-plaintext highlighter-rouge">ls</code>.<li>The argument passed invokes identical behavior to hop, except that here we are listing directory contents instead of changing the CWD.<li>Ensure that the files are always listed in lexicographic order. Note that you are <strong>not</strong> required to implement the format of <code class="language-plaintext highlighter-rouge">ls -l</code>. (In fact if you do you may lose marks due to the automated evaluation!) Further note that here you must use the ASCII values of the characters to sort the names lexicographically.<li>If the directory does not exist, output “No such directory!”</ol><h4 id="example-4"> <a href="#example-4" class="anchor-heading" aria-labelledby="example-4"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example</h4><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;rudy@iiit:~&gt; reveal ~
osnmp1
&lt;rudy@iiit:~&gt; hop ..
&lt;rudy@iiit:/home&gt; reveal
rudy
&lt;rudy@iiit:/home&gt; hop rudy/osnmp1
&lt;rudy@iiit:~/osnmp1&gt; reveal -la
.git
.gitignore
include
llm_completions
src
shell.out
Makefile
README.md
&lt;rudy@iiit:~/osnmp1&gt; reveal -lalalalaaaalal -lalala -al
.git
.gitignore
include
llm_completions
src
shell.out
Makefile
README.md
&lt;rudy@iiit:~/osnmp1&gt; reveal -aaaaaaa -a
.git .gitignore include llm_completions src shell.out Makefile README.md
</code></pre></div></div><h3 id="b3-log-30"> <a href="#b3-log-30" class="anchor-heading" aria-labelledby="b3-log-30"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> B.3: log [30]</h3><p><strong>Syntax</strong>: <code class="language-plaintext highlighter-rouge">log (purge | execute &lt;index&gt;)?</code></p><p><strong>Purpose</strong>: The log command allows a user to view their recently executed commands.</p><h4 id="requirements-5"> <a href="#requirements-5" class="anchor-heading" aria-labelledby="requirements-5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements</h4><ol><li>The stored list of commands must persist across shell sessions.<li>Store a maximum of 15 commands. Overwrite the oldest command.<li>Do not store a command if it is identical to the previously executed command in the log. Here identical can mean syntactically or exactly. Take it to mean exactly.<li>Always store the entire <code class="language-plaintext highlighter-rouge">shell_cmd</code> as defined in the CFG.<li>Do not store any <code class="language-plaintext highlighter-rouge">shell_cmd</code> if the command name of an atomic command is log itself.<li>The command exhibits three behaviors:<ul><li>No arguments: Print the stored commands in order of oldest to newest.<li><code class="language-plaintext highlighter-rouge">purge</code>: Clear the history.<li><code class="language-plaintext highlighter-rouge">execute &lt;index&gt;</code>: Execute the command at the given index (one-indexed, indexed in order of newest to oldest). Do not store the executed command.</ul></ol><p>EDIT - I recommend implementing this command after implementing part C.1.</p><h4 id="example-5"> <a href="#example-5" class="anchor-heading" aria-labelledby="example-5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example</h4><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;rudy@iiit:~&gt; reveal ~
osnmp1
&lt;rudy@iiit:~&gt; hop ..
&lt;rudy@iiit:/home/rudy&gt; reveal
osnmp1
&lt;rudy@iiit:/home/rudy&gt; hop
&lt;rudy@iiit:~&gt; log
reveal ~
hop ..
reveal
hop
&lt;rudy@iiit:~&gt; log execute 2
osnmp1
&lt;rudy@iiit:~&gt; log
reveal ~
hop ..
reveal
hop
&lt;rudy@iiit:~&gt; log purge
&lt;rudy@iiit:~&gt; log
&lt;rudy@iiit:~&gt;
</code></pre></div></div><h2 id="part-c-file-redirection-and-pipes-total-200"> <a href="#part-c-file-redirection-and-pipes-total-200" class="anchor-heading" aria-labelledby="part-c-file-redirection-and-pipes-total-200"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Part C: File Redirection and Pipes [Total: 200]</h2><p>For this part, you will implement I/O redirection and command piping. When processing commands with sequential (<code class="language-plaintext highlighter-rouge">;</code>) or background (<code class="language-plaintext highlighter-rouge">&amp;</code>, <code class="language-plaintext highlighter-rouge">&amp;&amp;</code>) operators, you should only execute the first <code class="language-plaintext highlighter-rouge">cmd_group</code> and ignore the rest for now.</p><h3 id="c1-command-execution"> <a href="#c1-command-execution" class="anchor-heading" aria-labelledby="c1-command-execution"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> C.1: Command Execution</h3><p>This part was implicitly required, and has just been added explicitly for clarity. You must allow the execution of <strong>arbitrary comands</strong>. This includes commands like <code class="language-plaintext highlighter-rouge">cat</code>, <code class="language-plaintext highlighter-rouge">echo</code>, <code class="language-plaintext highlighter-rouge">sleep</code>, etc.</p><h3 id="c2-input-redirection-50"> <a href="#c2-input-redirection-50" class="anchor-heading" aria-labelledby="c2-input-redirection-50"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> C.2: Input Redirection [50]</h3><p><strong>Syntax</strong>: <code class="language-plaintext highlighter-rouge">command &lt; filename</code></p><p><strong>Purpose</strong>: The input redirection operator allows a command to read its standard input from a file instead of the terminal.</p><h4 id="requirements-6"> <a href="#requirements-6" class="anchor-heading" aria-labelledby="requirements-6"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements</h4><ol><li>The shell must open the specified file for reading using the <code class="language-plaintext highlighter-rouge">open()</code> system call with <code class="language-plaintext highlighter-rouge">O_RDONLY</code> flag.<li>If the file does not exist or cannot be opened, the shell must print “No such file or directory” and not execute the command.<li>The shell must redirect the command’s standard input (<code class="language-plaintext highlighter-rouge">STDIN_FILENO</code>) to the opened file using <code class="language-plaintext highlighter-rouge">dup2()</code>.<li>The shell must close the original file descriptor after duplication to avoid file descriptor leaks.<li>When multiple input redirections are present (e.g., <code class="language-plaintext highlighter-rouge">command &lt; file1 &lt; file2</code>), only the last one must take effect.</ol><h3 id="c3-output-redirection-50"> <a href="#c3-output-redirection-50" class="anchor-heading" aria-labelledby="c3-output-redirection-50"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> C.3: Output Redirection [50]</h3><p><strong>Syntax</strong>: <code class="language-plaintext highlighter-rouge">command &gt; filename</code> or <code class="language-plaintext highlighter-rouge">command &gt;&gt; filename</code></p><p><strong>Purpose</strong>: The output redirection operators allow a command to write its standard output to a file instead of the terminal.</p><h4 id="requirements-7"> <a href="#requirements-7" class="anchor-heading" aria-labelledby="requirements-7"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements</h4><ol><li>For <code class="language-plaintext highlighter-rouge">&gt;</code>, the shell must create a new file (wipe it if it already exists) and open it for writing.<li>For <code class="language-plaintext highlighter-rouge">&gt;&gt;</code>, the shell must append to the passed file (or create if it doesn’t exist) and open it for appending.<li>When multiple output redirections are present (e.g., <code class="language-plaintext highlighter-rouge">command &gt; file1 &gt; file2</code>), only the last one must take effect.<li>Input and output redirection must work together (e.g., <code class="language-plaintext highlighter-rouge">command &lt; input.txt &gt; output.txt</code>).</ol><h3 id="c4-command-piping-100"> <a href="#c4-command-piping-100" class="anchor-heading" aria-labelledby="c4-command-piping-100"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> C.4: Command Piping [100]</h3><p><strong>Syntax</strong>: <code class="language-plaintext highlighter-rouge">command1 | command2 | ... | commandN</code></p><p><strong>Purpose</strong>: The pipe operator allows the standard output of one command to be connected to the standard input of the next command.</p><h4 id="requirements-8"> <a href="#requirements-8" class="anchor-heading" aria-labelledby="requirements-8"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements</h4><ol><li>The shell must create pipes using the <code class="language-plaintext highlighter-rouge">pipe()</code> system call for each <code class="language-plaintext highlighter-rouge">|</code> operator in the command.<li>For each command in the pipeline, the shell must fork a child process.<li>The shell must redirect the standard output of <code class="language-plaintext highlighter-rouge">command[i]</code> to the write end of <code class="language-plaintext highlighter-rouge">pipe[i]</code>.<li>The shell must redirect the standard input of <code class="language-plaintext highlighter-rouge">command[i+1]</code> to the read end of <code class="language-plaintext highlighter-rouge">pipe[i]</code>.<li>The parent shell must wait for all commands in the pipeline to complete.<li>A piped command sequence is considered finished only when all processes in the pipeline have exited.<li>If any command in the pipeline fails to execute, the pipeline must still attempt to run the remaining commands.<li>File redirection and pipes must work together (e.g., <code class="language-plaintext highlighter-rouge">command1 &lt; input.txt | command2 &gt; output.txt</code>).</ol><h2 id="part-d-sequential-and-background-execution-total-200"> <a href="#part-d-sequential-and-background-execution-total-200" class="anchor-heading" aria-labelledby="part-d-sequential-and-background-execution-total-200"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Part D: Sequential and Background Execution [Total: 200]</h2><h3 id="d1-sequential-execution-100"> <a href="#d1-sequential-execution-100" class="anchor-heading" aria-labelledby="d1-sequential-execution-100"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> D.1: Sequential Execution [100]</h3><p><strong>Syntax</strong>: <code class="language-plaintext highlighter-rouge">command1 ; command2 ; ... ; commandN</code></p><p><strong>Purpose</strong>: The semicolon operator allows multiple commands to be executed one after another.</p><h4 id="requirements-9"> <a href="#requirements-9" class="anchor-heading" aria-labelledby="requirements-9"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements</h4><ol><li>The shell must execute each command in the order they appear.<li>The shell must wait for each command to complete before starting the next.<li>If a command fails to execute, the shell must continue executing the subsequent commands.<li>Each command in the sequence must be treated as a complete <code class="language-plaintext highlighter-rouge">shell_cmd</code> as defined in the grammar.<li>The shell prompt must only be displayed after all commands in the sequence have finished executing.</ol><h3 id="d2-background-execution-100"> <a href="#d2-background-execution-100" class="anchor-heading" aria-labelledby="d2-background-execution-100"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> D.2: Background Execution [100]</h3><p><strong>Syntax</strong>: <code class="language-plaintext highlighter-rouge">command &amp;</code></p><p><strong>Purpose</strong>: The ampersand operator allows a command to run in the background while the shell continues to accept new commands.</p><h4 id="requirements-10"> <a href="#requirements-10" class="anchor-heading" aria-labelledby="requirements-10"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements</h4><ol><li>When a command ends with <code class="language-plaintext highlighter-rouge">&amp;</code>, the shell must fork a child process but not wait for it to complete.<li>The shell must print the background job number and process ID in the format: <code class="language-plaintext highlighter-rouge">[job_number] process_id</code><li>The shell must immediately display a new prompt after launching the background process.<li>After an user inputs, before parsing the input, the shell must check for completed background processes.<li>When a background process completes successfully, the shell must print: <code class="language-plaintext highlighter-rouge">command_name with pid process_id exited normally</code><li>When a background process exits abnormally, the shell must print: <code class="language-plaintext highlighter-rouge">command_name with pid process_id exited abnormally</code><li>Background processes must not have access to the terminal for input.<li>If a background command in a sequence is followed by more commands (e.g., <code class="language-plaintext highlighter-rouge">cmd1 &amp; cmd2</code>), only <code class="language-plaintext highlighter-rouge">cmd1</code> runs in the background.</ol><h2 id="part-e-exotic-shell-intrinsics-total-110"> <a href="#part-e-exotic-shell-intrinsics-total-110" class="anchor-heading" aria-labelledby="part-e-exotic-shell-intrinsics-total-110"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Part E: Exotic Shell Intrinsics [Total: 110]</h2><h3 id="e1-activities-20"> <a href="#e1-activities-20" class="anchor-heading" aria-labelledby="e1-activities-20"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> E.1: activities [20]</h3><p><strong>Syntax</strong>: <code class="language-plaintext highlighter-rouge">activities</code></p><p><strong>Purpose</strong>: The activities command lists all processes spawned by the shell that are still running or stopped.</p><h4 id="requirements-11"> <a href="#requirements-11" class="anchor-heading" aria-labelledby="requirements-11"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements</h4><ol><li>The command must display each process in the format: <code class="language-plaintext highlighter-rouge">[pid] : command_name - State</code><li>The command must sort the output lexicographically by command name before printing.<li>The command must remove processes from the list once they have terminated.<li>Running processes must show state as “Running” and stopped processes as “Stopped”.</ol><h3 id="e2-ping-20"> <a href="#e2-ping-20" class="anchor-heading" aria-labelledby="e2-ping-20"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> E.2: ping [20]</h3><p><strong>Syntax</strong>: <code class="language-plaintext highlighter-rouge">ping &lt;pid&gt; &lt;signal_number&gt;</code></p><p><strong>Purpose</strong>: The ping command sends a signal to a process with the specified PID.</p><h4 id="requirements-12"> <a href="#requirements-12" class="anchor-heading" aria-labelledby="requirements-12"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements</h4><ol><li>The command must take the signal number modulo 32 before sending: <code class="language-plaintext highlighter-rouge">actual_signal = signal_number % 32</code><li>If the process does not exist, the command must print “No such process found”<li>On successful signal delivery, the command must print “Sent signal signal_number to process with pid <code class="language-plaintext highlighter-rouge">&lt;pid&gt;</code>”</ol><h3 id="e3-ctrl-c-ctrl-d-and-ctrl-z-30"> <a href="#e3-ctrl-c-ctrl-d-and-ctrl-z-30" class="anchor-heading" aria-labelledby="e3-ctrl-c-ctrl-d-and-ctrl-z-30"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> E.3: Ctrl-C, Ctrl-D and Ctrl-Z [30]</h3><p><strong>Purpose</strong>: These keyboard shortcuts provide job control functionality.</p><h4 id="requirements-for-ctrl-c-sigint"> <a href="#requirements-for-ctrl-c-sigint" class="anchor-heading" aria-labelledby="requirements-for-ctrl-c-sigint"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements for Ctrl-C (SIGINT):</h4><ol><li>The shell must install a signal handler for SIGINT.<li>The handler must send SIGINT to the current foreground child process group if one exists.<li>The shell itself must not terminate on Ctrl-C.</ol><h4 id="requirements-for-ctrl-d-eof"> <a href="#requirements-for-ctrl-d-eof" class="anchor-heading" aria-labelledby="requirements-for-ctrl-d-eof"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements for Ctrl-D (EOF):</h4><ol><li>The shell must detect the EOF condition.<li>The shell must send SIGKILL to all child processes.<li>The shell must exit with status 0.<li>The shell must print “logout” before exiting.</ol><h4 id="requirements-for-ctrl-z-sigtstp"> <a href="#requirements-for-ctrl-z-sigtstp" class="anchor-heading" aria-labelledby="requirements-for-ctrl-z-sigtstp"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements for Ctrl-Z (SIGTSTP):</h4><ol><li>The shell must install a signal handler for SIGTSTP.<li>The handler must send SIGTSTP to the current foreground child process group if one exists.<li>The shell must move the stopped process to the background process list with status “Stopped”.<li>The shell must print: <code class="language-plaintext highlighter-rouge">[job_number] Stopped command_name</code><li>The shell itself must not stop on Ctrl-Z.</ol><h3 id="e4-fg-and-bg-40"> <a href="#e4-fg-and-bg-40" class="anchor-heading" aria-labelledby="e4-fg-and-bg-40"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> E.4: fg and bg [40]</h3><p><strong>Syntax</strong>: <code class="language-plaintext highlighter-rouge">fg [job_number]</code> and <code class="language-plaintext highlighter-rouge">bg [job_number]</code></p><p><strong>Purpose</strong>: The fg and bg commands control background and stopped jobs.</p><h4 id="requirements-for-fg-command"> <a href="#requirements-for-fg-command" class="anchor-heading" aria-labelledby="requirements-for-fg-command"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements for fg command:</h4><ol><li>The command must bring a background or stopped job to the foreground.<li>If the job is stopped, the command must send SIGCONT to resume it.<li>The shell must wait for the job to complete or stop again.<li>If no job number is provided, the command must use the most recently created background/stopped job.<li>If the job number doesn’t exist, the command must print “No such job”<li>The command must print the entire command when bringing it to foreground.</ol><h4 id="requirements-for-bg-command"> <a href="#requirements-for-bg-command" class="anchor-heading" aria-labelledby="requirements-for-bg-command"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements for bg command:</h4><ol><li>The command must resume a stopped background job by sending SIGCONT.<li>The job must continue running in the background after receiving the signal.<li>The command must print <code class="language-plaintext highlighter-rouge">[job_number] command_name &amp;</code> when resuming.<li>If the job is already running, the command must print “Job already running”<li>If the job number doesn’t exist, the command must print “No such job”<li>Only stopped jobs can be resumed with bg; running jobs must produce “Job already running”</ol><h1 id="networking-total-80"> <a href="#networking-total-80" class="anchor-heading" aria-labelledby="networking-total-80"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Networking [Total 80]</h1><p><strong>Objective:</strong> In this part of the mini-project you will be building upon the the unreliable UDP protocol to improve upon its reliability and you will be simulating several core TCP functionalities from scratch. This section is designed to make you familiar with socket programming, TCP and UDP protocols, supporting both file transfer and real-time chat.</p><h3 id="1-core-functionalities"> <a href="#1-core-functionalities" class="anchor-heading" aria-labelledby="1-core-functionalities"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Core Functionalities</h3><h4 id="11-sham-packet-structure-5"> <a href="#11-sham-packet-structure-5" class="anchor-heading" aria-labelledby="11-sham-packet-structure-5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.1 S.H.A.M. Packet Structure [5]</h4><p>All communication must occur via UDP datagrams. The payload of each datagram will be a <strong>S.H.A.M.</strong> packet, which you must define using a <code class="language-plaintext highlighter-rouge">struct</code>. This header must precede any application data.</p><pre><code class="language-C">
// Recommended S.H.A.M. Header Structure

struct sham_header {

uint32_t seq_num; // Sequence Number

uint32_t ack_num; // Acknowledgment Number

uint16_t flags; // Control flags (SYN, ACK, FIN)

uint16_t window_size; // Flow control window size

};

</code></pre><ul><li><p><strong>Sequence Number (<code class="language-plaintext highlighter-rouge">seq_num</code>):</strong> A 32-bit field indicating the byte-stream number of the first byte in this packet’s data segment.</p><li><p><strong>Acknowledgment Number (<code class="language-plaintext highlighter-rouge">ack_num</code>):</strong> A 32-bit field that contains the value of the next sequence number the sender of the ACK is expecting to receive. This will be a <strong>cumulative acknowledgment</strong>.</p><li><p><strong>Flags (<code class="language-plaintext highlighter-rouge">flags</code>):</strong> A 16-bit field for connection management. You must implement:</p><li><p><code class="language-plaintext highlighter-rouge">SYN</code> (Synchronise): <code class="language-plaintext highlighter-rouge">0x1</code> - Used to initiate a connection.</p><li><p><code class="language-plaintext highlighter-rouge">ACK</code> (Acknowledge): <code class="language-plaintext highlighter-rouge">0x2</code> - Indicates the <code class="language-plaintext highlighter-rouge">ack_num</code> field is significant.</p><li><p><code class="language-plaintext highlighter-rouge">FIN</code> (Finish): <code class="language-plaintext highlighter-rouge">0x4</code> - Used to terminate a connection.</p><li><p><strong>Window Size (<code class="language-plaintext highlighter-rouge">window_size</code>):</strong> A 16-bit field for flow control. It specifies the number of data bytes the sender of this packet is willing to accept.</p></ul><h4 id="12-connection-management-10"> <a href="#12-connection-management-10" class="anchor-heading" aria-labelledby="12-connection-management-10"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.2 Connection Management [10]</h4><p>Your protocol must establish and terminate connections gracefully.</p><ul><li><strong>Three-Way Handshake (Establishment):</strong></ul><ol><li><p><strong>Client -&gt; Server:</strong> Sends a packet with the <code class="language-plaintext highlighter-rouge">SYN</code> flag set and an initial sequence number <code class="language-plaintext highlighter-rouge">X</code>.</p><li><p><strong>Server -&gt; Client:</strong> Responds with a packet where both <code class="language-plaintext highlighter-rouge">SYN</code> and <code class="language-plaintext highlighter-rouge">ACK</code> flags are set. It uses its own initial sequence number <code class="language-plaintext highlighter-rouge">Y</code> and acknowledges the client with <code class="language-plaintext highlighter-rouge">ack_num = X + 1</code>.</p><li><p><strong>Client -&gt; Server:</strong> Completes the handshake by sending a packet with the <code class="language-plaintext highlighter-rouge">ACK</code> flag set and <code class="language-plaintext highlighter-rouge">ack_num = Y + 1</code>. The connection is now established.</p></ol><ul><li><strong>Four-Way Handshake (Termination):</strong></ul><ol><li><p><strong>Initiator -&gt; Other Side:</strong> Sends a <code class="language-plaintext highlighter-rouge">FIN</code> packet.</p><li><p><strong>Other Side -&gt; Initiator:</strong> Responds with an <code class="language-plaintext highlighter-rouge">ACK</code>.</p><li><p><strong>Other Side -&gt; Initiator:</strong> Once it’s ready to close, sends its own <code class="language-plaintext highlighter-rouge">FIN</code>.</p><li><p><strong>Initiator -&gt; Other Side:</strong> Responds with a final <code class="language-plaintext highlighter-rouge">ACK</code>.</p></ol><h4 id="13-data-sequencing-and-retransmission25"> <a href="#13-data-sequencing-and-retransmission25" class="anchor-heading" aria-labelledby="13-data-sequencing-and-retransmission25"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1.3 Data Sequencing and Retransmission[25]</h4><ul><li><p><strong>Data Segmentation:</strong> The sender must read a file (or user input) and break it into fixed-size chunks (1024 bytes). Each chunk is the payload for a <strong>S.H.A.M.</strong> packet.</p><li><p><strong>Sliding Window:</strong> The sender can transmit multiple packets without waiting for an acknowledgment for each one. The number of unacknowledged packets in flight must not exceed a fixed window size (this is different from the <code class="language-plaintext highlighter-rouge">window_size</code> and is fixed e.g., 10 packets ).</p><li><p><strong>Cumulative ACKs:</strong> The receiver should send an <code class="language-plaintext highlighter-rouge">ACK</code> for the highest in-order sequence number received. For example, if packets 1, 2, and 4 arrive, the receiver sends <code class="language-plaintext highlighter-rouge">ACK</code> for sequence 3 (since it’s expecting packet 3 next). It should buffer packet 4.</p><li><p><strong>Retransmission Timeout (RTO):</strong> The sender must maintain a timer for each packet sent. If an <code class="language-plaintext highlighter-rouge">ACK</code> for a given packet is not received within a timeout period (e.g., 500ms), the packet must be retransmitted.</p></ul><h5 id="example-1-basic-retransmission-scenario"> <a href="#example-1-basic-retransmission-scenario" class="anchor-heading" aria-labelledby="example-1-basic-retransmission-scenario"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example 1: Basic Retransmission Scenario</h5><p>This example demonstrates how the system recovers when a single packet is lost.</p><p><strong>Scenario Assumptions:</strong></p><ul><li><strong>Sender’s Sliding Window:</strong> 4 packets<li><strong>Packet Data Size:</strong> 1024 bytes<li><strong>Sequence Numbers (<code class="language-plaintext highlighter-rouge">SEQ</code>):</strong> Byte-based</ul><hr /><p><strong>Step 1: Initial Transmission</strong></p><p>The sender transmits a window of four packets and starts a timer for each one.</p><ul><li><code class="language-plaintext highlighter-rouge">SND DATA SEQ=1</code><li><code class="language-plaintext highlighter-rouge">SND DATA SEQ=1025</code> &lt;– <strong>This packet is lost</strong><li><code class="language-plaintext highlighter-rouge">SND DATA SEQ=2049</code><li><code class="language-plaintext highlighter-rouge">SND DATA SEQ=3073</code></ul><p><strong>Step 2: Receiver’s Cumulative ACK</strong></p><p>The receiver gets packets 1, 3, and 4. Since packet 2 (<code class="language-plaintext highlighter-rouge">SEQ=1025</code>) is missing, it can only acknowledge the data it has received contiguously. It buffers packets 3 and 4.</p><ul><li>It sends an ACK for the next byte it expects: <code class="language-plaintext highlighter-rouge">RCV sends: ACK=1025</code></ul><p><strong>Step 3: Timeout and Selective Retransmission</strong> ⏳</p><p>The sender’s timer for packet 2 (<code class="language-plaintext highlighter-rouge">SEQ=1025</code>) expires. It assumes the packet was lost and retransmits <strong>only that packet</strong>.</p><ul><li><code class="language-plaintext highlighter-rouge">TIMEOUT SEQ=1025</code><li><code class="language-plaintext highlighter-rouge">RETX DATA SEQ=1025</code></ul><p><strong>Step 4: Recovery and Final ACK</strong></p><p>The receiver gets the retransmitted packet 2. It can now process its buffered packets (3 and 4), completing the sequence up to byte 4096.</p><ul><li>It sends a new cumulative ACK for the entire block: <code class="language-plaintext highlighter-rouge">RCV sends: ACK=4097</code></ul><hr /><h5 id="example-2-the-efficiency-of-cumulative-acks"> <a href="#example-2-the-efficiency-of-cumulative-acks" class="anchor-heading" aria-labelledby="example-2-the-efficiency-of-cumulative-acks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example 2: The Efficiency of Cumulative ACKs</h5><p>This section addresses a common question about the previous scenario.</p><p><strong>Question:</strong> After retransmitting packet 2, does the sender also need to retransmit packets 3 and 4?</p><p><strong>Answer:</strong> <strong>No.</strong> The sender does not retransmit packets 3 and 4.</p><p><strong>Explanation:</strong> The final <code class="language-plaintext highlighter-rouge">ACK=4097</code> sent by the receiver is a <strong>cumulative acknowledgment</strong>. This single message efficiently informs the sender of two things:</p><ol><li>“I have successfully received <strong>all data</strong> up to and including byte 4096.”<li>“I am now ready for the next piece of data, which starts at byte 4097.”</ol><p>When the sender receives this ACK, it knows that the retransmitted packet 2, as well as the originally sent packets 3 and 4, have all been successfully received. It can then cancel any running timers for those packets and continue sending new data. This prevents unnecessary retransmissions and makes the protocol highly efficient.</p><h3 id="2-flow-control10"> <a href="#2-flow-control10" class="anchor-heading" aria-labelledby="2-flow-control10"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Flow Control[10]</h3><p>You must implement a basic sliding window flow control mechanism.</p><ul><li>The receiver must always include its current available buffer space (in bytes) in the <code class="language-plaintext highlighter-rouge">window_size</code> field of every packet it sends.<li>The sender must read this <code class="language-plaintext highlighter-rouge">window_size</code> from incoming <code class="language-plaintext highlighter-rouge">ACK</code> packets.<li>The sender must ensure that the amount of unacknowledged data it has in flight (<code class="language-plaintext highlighter-rouge">LastByteSent</code> - <code class="language-plaintext highlighter-rouge">LastByteAcked</code>) is <strong>always less than or equal to</strong> the receiver’s advertised <code class="language-plaintext highlighter-rouge">window_size</code>.</ul><h3 id="3-implementation-and-testing-requirements"> <a href="#3-implementation-and-testing-requirements" class="anchor-heading" aria-labelledby="3-implementation-and-testing-requirements"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Implementation and Testing Requirements</h3><p>To enable quick and automated testing, your programs <strong>must</strong> adhere to the following specifications.</p><h4 id="31-command-line-interface"> <a href="#31-command-line-interface" class="anchor-heading" aria-labelledby="31-command-line-interface"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.1 Command-Line Interface</h4><p>Your client and server must be executable with the following arguments, supporting two modes of operation.</p><ul><li><strong>Server:</strong></ul><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./server &lt;port&gt; <span class="o">[</span><span class="nt">--chat</span><span class="o">]</span> <span class="o">[</span>loss_rate]

</code></pre></div></div><ul><li><strong>Client:</strong></ul><h6 id="file-transfer-mode-default"> <a href="#file-transfer-mode-default" class="anchor-heading" aria-labelledby="file-transfer-mode-default"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> File Transfer Mode (Default)</h6><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./client &lt;server_ip&gt; &lt;server_port&gt; &lt;input_file&gt; &lt;output_file_name&gt; <span class="o">[</span>loss_rate]
</code></pre></div></div><h6 id="chat-mode"> <a href="#chat-mode" class="anchor-heading" aria-labelledby="chat-mode"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Chat Mode</h6><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./client &lt;server_ip&gt; &lt;server_port&gt; <span class="nt">--chat</span> <span class="o">[</span>loss_rate]

</code></pre></div></div><ul><li><p><code class="language-plaintext highlighter-rouge">--chat</code>: An optional flag to activate Chat Mode. When used, all file-related arguments are ignored.</p><li><p><code class="language-plaintext highlighter-rouge">[loss_rate]</code>: An optional floating-point value between 0.0 and 1.0 indicating the packet loss probability. If not provided, it defaults to 0.0.</p></ul><h4 id="32-mode-specific-behavior-10"> <a href="#32-mode-specific-behavior-10" class="anchor-heading" aria-labelledby="32-mode-specific-behavior-10"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.2 Mode-Specific Behavior [10]</h4><ul><li><strong>File Transfer Mode (Default):</strong> After the handshake, the client sends the specified file to the server. The server receives and saves the file. This is the behavior if the <code class="language-plaintext highlighter-rouge">--chat</code> flag is <strong>not</strong> present.<li><strong>Chat Mode (<code class="language-plaintext highlighter-rouge">--chat</code>):</strong> After the handshake, both client and server enter a loop to handle concurrent input from the keyboard (<code class="language-plaintext highlighter-rouge">stdin</code>) and the network socket. Typing <code class="language-plaintext highlighter-rouge">/quit</code> in the chat should initiate the 4-way <code class="language-plaintext highlighter-rouge">FIN</code> handshake to terminate the connection.<li><strong>Hint:</strong> Use the <code class="language-plaintext highlighter-rouge">select()</code> system call to monitor both <code class="language-plaintext highlighter-rouge">stdin</code> (file descriptor 0) and your socket to handle I/O without threads.</ul><h4 id="33-standardized-output-for-verification-5"> <a href="#33-standardized-output-for-verification-5" class="anchor-heading" aria-labelledby="33-standardized-output-for-verification-5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.3 Standardized Output for Verification [5]</h4><p><strong>This requirement applies to File Transfer Mode only.</strong> Upon successfully receiving the entire file and closing the connection, the server <strong>must</strong> perform two actions:</p><ol><li>Calculate the MD5 checksum of the received file.<li>Print the result to <code class="language-plaintext highlighter-rouge">stdout</code> in the following exact format:</ol><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MD5: &lt;32-character_lowercase_md5_hash&gt;
</code></pre></div></div><h5 id="linux"> <a href="#linux" class="anchor-heading" aria-labelledby="linux"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Linux</h5><h6 id="step1-install-the-library"> <a href="#step1-install-the-library" class="anchor-heading" aria-labelledby="step1-install-the-library"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step1: Install the library</h6><ol><li><p>In your terminal, run the following command to update your package lists and install the required package (<code class="language-plaintext highlighter-rouge">libssl-dev</code>):</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt <span class="nb">install </span>libssl-dev
</code></pre></div></div></ol><h6 id="step-2-compile-your-code-correctly"> <a href="#step-2-compile-your-code-correctly" class="anchor-heading" aria-labelledby="step-2-compile-your-code-correctly"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2: Compile Your Code Correctly</h6><p>Once the library is installed, you can compile your code. You <strong>do not</strong> need the special <code class="language-plaintext highlighter-rouge">-I</code> and <code class="language-plaintext highlighter-rouge">-L</code> flags that were required for macOS.</p><ol><li><p><strong>Use this simple command template</strong> to compile your program. Replace <code class="language-plaintext highlighter-rouge">your_program.c</code> and <code class="language-plaintext highlighter-rouge">-o your_program</code> with your actual filenames.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcc your_program.c <span class="nt">-o</span> your_program <span class="nt">-lcrypto</span>
</code></pre></div></div></ol><h5 id="macos"> <a href="#macos" class="anchor-heading" aria-labelledby="macos"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> MacOS</h5><h6 id="step-1-install-the-openssl-library"> <a href="#step-1-install-the-openssl-library" class="anchor-heading" aria-labelledby="step-1-install-the-openssl-library"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 1: Install the OpenSSL Library</h6><p>Now, use Homebrew to install the OpenSSL library. It’s a simple, one-line command.</p><ol><li><p>In your Terminal, run:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew <span class="nb">install </span>openssl
</code></pre></div></div></ol><hr /><h6 id="step-2-compile-your-code-correctly-1"> <a href="#step-2-compile-your-code-correctly-1" class="anchor-heading" aria-labelledby="step-2-compile-your-code-correctly-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Step 2: Compile Your Code Correctly</h6><p>Because Homebrew installs OpenSSL in a special location, you can’t just use a simple <code class="language-plaintext highlighter-rouge">gcc</code> command. You must include special flags to tell the compiler where to find the OpenSSL files.</p><ol><li><p><strong>Use this specific command template</strong> to compile your program. Replace <code class="language-plaintext highlighter-rouge">your_program.c</code> and <code class="language-plaintext highlighter-rouge">-o your_program</code> with your actual filenames.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcc your_program.c <span class="nt">-o</span> your_program <span class="nt">-I</span><span class="si">$(</span>brew <span class="nt">--prefix</span> openssl<span class="si">)</span>/include <span class="nt">-L</span><span class="si">$(</span>brew <span class="nt">--prefix</span> openssl<span class="si">)</span>/lib <span class="nt">-lcrypto</span>
</code></pre></div></div></ol><h4 id="34-simulating-packet-loss-for-testing-5"> <a href="#34-simulating-packet-loss-for-testing-5" class="anchor-heading" aria-labelledby="34-simulating-packet-loss-for-testing-5"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.4 Simulating Packet Loss for Testing [5]</h4><p>This requirement applies to both modes. The receiver must programmatically drop incoming data packets based on the optional <code class="language-plaintext highlighter-rouge">loss_rate</code> command-line argument to test retransmission logic.</p><h3 id="4-verbose-logging-for-evaluation-10"> <a href="#4-verbose-logging-for-evaluation-10" class="anchor-heading" aria-labelledby="4-verbose-logging-for-evaluation-10"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 4. Verbose Logging for Evaluation [10]</h3><p>To allow the evaluator to verify the internal mechanics of your protocol, you must implement a verbose logging mode that writes metadata about key events, prefixed with a high-precision timestamp, to a dedicated log file.</p><ul><li><strong>Activation:</strong> The logging mode <strong>must</strong> be activated by setting an environment variable <code class="language-plaintext highlighter-rouge">RUDP_LOG=1</code>. If this variable is not set, no log file should be created or written to.<li><strong>Log File Naming:</strong> The log file must be named according to the program’s role:<li><strong>Server:</strong> <code class="language-plaintext highlighter-rouge">server_log.txt</code><li><strong>Client:</strong> <code class="language-plaintext highlighter-rouge">client_log.txt</code><li><strong>Log Line Format:</strong> Each line in the log file must start with a timestamp in <code class="language-plaintext highlighter-rouge">[YYYY-MM-DD HH:MM:SS.microseconds]</code> format, followed by the <code class="language-plaintext highlighter-rouge">[LOG]</code> prefix and the event descriptiion.</ul><h4 id="implementation-note"> <a href="#implementation-note" class="anchor-heading" aria-labelledby="implementation-note"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Implementation Note:</h4><p>To get microsecond-level precision for your timestamps, you cannot use the standard <code class="language-plaintext highlighter-rouge">time()</code> function. You should use <code class="language-plaintext highlighter-rouge">gettimeofday()</code> from <code class="language-plaintext highlighter-rouge">&lt;sys/time.h&gt;</code>.</p><div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="cp">#include &lt;stdio.h&gt;
#include &lt;sys/time.h&gt;
#include &lt;time.h&gt;
</span>
<span class="c1">// Inside your logging function</span>

<span class="kt">char</span> <span class="n">time_buffer</span><span class="p">[</span><span class="mi">30</span><span class="p">];</span>
<span class="k">struct</span> <span class="n">timeval</span> <span class="n">tv</span><span class="p">;</span>
<span class="kt">time_t</span> <span class="n">curtime</span><span class="p">;</span>

<span class="n">gettimeofday</span><span class="p">(</span><span class="o">&amp;</span><span class="n">tv</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="n">curtime</span> <span class="o">=</span> <span class="n">tv</span><span class="p">.</span><span class="n">tv_sec</span><span class="p">;</span>

<span class="c1">// Format the time part</span>
<span class="n">strftime</span><span class="p">(</span><span class="n">time_buffer</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="s">"%Y-%m-%d %H:%M:%S"</span><span class="p">,</span> <span class="n">localtime</span><span class="p">(</span><span class="o">&amp;</span><span class="n">curtime</span><span class="p">));</span>

<span class="c1">// Add microseconds and print to the log file</span>
<span class="n">fprintf</span><span class="p">(</span><span class="n">log_file</span><span class="p">,</span> <span class="s">"[%s.%06ld] [LOG] Your message here</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">time_buffer</span><span class="p">,</span> <span class="n">tv</span><span class="p">.</span><span class="n">tv_usec</span><span class="p">);</span>

</code></pre></div></div><h4 id="required-log-events"> <a href="#required-log-events" class="anchor-heading" aria-labelledby="required-log-events"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Required Log Events:</h4><p>Your implementation must write a timestamped log message to the designated log file for each of the following events when logging is active:</p><ol><li><strong>Connection Handshake:</strong></ol><ul><li><p><code class="language-plaintext highlighter-rouge">[timestamp] [LOG] SND SYN SEQ=&lt;num&gt;</code></p><li><p><code class="language-plaintext highlighter-rouge">[timestamp] [LOG] RCV SYN SEQ=&lt;num&gt;</code></p><li><p><code class="language-plaintext highlighter-rouge">[timestamp] [LOG] SND SYN-ACK SEQ=&lt;num&gt; ACK=&lt;num&gt;</code></p><li><p><code class="language-plaintext highlighter-rouge">[timestamp] [LOG] RCV ACK FOR SYN</code></p></ul><ol><li><strong>Data Transmission:</strong></ol><ul><li><p><code class="language-plaintext highlighter-rouge">[timestamp] [LOG] SND DATA SEQ=&lt;num&gt; LEN=&lt;bytes&gt;</code></p><li><p><code class="language-plaintext highlighter-rouge">[timestamp] [LOG] RCV DATA SEQ=&lt;num&gt; LEN=&lt;bytes&gt;</code></p></ul><ol><li><strong>Acknowledgments:</strong></ol><ul><li><p><code class="language-plaintext highlighter-rouge">[timestamp] [LOG] SND ACK=&lt;num&gt; WIN=&lt;window_size&gt;</code></p><li><p><code class="language-plaintext highlighter-rouge">[timestamp] [LOG] RCV ACK=&lt;num&gt;</code></p></ul><ol><li><strong>Retransmission:</strong></ol><ul><li><p><code class="language-plaintext highlighter-rouge">[timestamp] [LOG] TIMEOUT SEQ=&lt;num&gt;</code></p><li><p><code class="language-plaintext highlighter-rouge">[timestamp] [LOG] RETX DATA SEQ=&lt;num&gt; LEN=&lt;bytes&gt;</code></p></ul><ol><li><strong>Flow Control:</strong></ol><ul><li><code class="language-plaintext highlighter-rouge">[timestamp] [LOG] FLOW WIN UPDATE=&lt;new_window_size&gt;</code></ul><ol><li><strong>Simulated Packet Loss:</strong></ol><ul><li><code class="language-plaintext highlighter-rouge">[timestamp] [LOG] DROP DATA SEQ=&lt;num&gt;</code></ul><h4 id="example-log-file-content-server_logtxt"> <a href="#example-log-file-content-server_logtxt" class="anchor-heading" aria-labelledby="example-log-file-content-server_logtxt"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example Log File Content (<code class="language-plaintext highlighter-rouge">server_log.txt</code>)</h4><p>Here is a sample of what we expect to see inside the <code class="language-plaintext highlighter-rouge">server_log.txt</code> file. The program’s standard output (<code class="language-plaintext highlighter-rouge">stdout</code>) should still <em>only</em> contain the final <code class="language-plaintext highlighter-rouge">MD5:</code> line.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
[2025-08-03 17:38:15.123456] [LOG] RCV SYN SEQ=100

[2025-08-03 17:38:15.123589] [LOG] SND SYN-ACK SEQ=5000 ACK=101

[2025-08-03 17:38:15.124821] [LOG] RCV ACK FOR SYN

[2025-08-03 17:38:15.125111] [LOG] RCV DATA SEQ=101 LEN=1024

[2025-08-03 17:38:15.125185] [LOG] SND ACK=1125 WIN=8192

[2025-08-03 17:38:15.626234] [LOG] TIMEOUT SEQ=1125

[2025-08-03 17:38:15.626301] [LOG] RETX DATA SEQ=1125 LEN=1024

[2025-08-03 17:38:15.628991] [LOG] RCV ACK=2149

[2025-08-03 17:38:16.010101] [LOG] RCV FIN SEQ=4197

[2025--08-03 17:38:16.010182] [LOG] SND ACK FOR FIN

[2025-08-03 17:38:16.010250] [LOG] SND FIN SEQ=8500

[2025-08-03 17:38:16.011500] [LOG] RCV ACK=8501

</code></pre></div></div><h1 id="xv6-total-marks---140"> <a href="#xv6-total-marks---140" class="anchor-heading" aria-labelledby="xv6-total-marks---140"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> xv6 [Total Marks - 140]</h1><p>Please attend the tutorial on xv6 to understand how to set up and get started with xv6.</p><h2 id="part-a---basic-system-call-getreadcount"> <a href="#part-a---basic-system-call-getreadcount" class="anchor-heading" aria-labelledby="part-a---basic-system-call-getreadcount"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Part A - Basic System Call: getreadcount</h2><p>Implement a system call that tracks and returns the total number of bytes read by the <code class="language-plaintext highlighter-rouge">read()</code> system call across all processes since boot.</p><h3 id="requirements-13"> <a href="#requirements-13" class="anchor-heading" aria-labelledby="requirements-13"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements</h3><h4 id="a1-system-call-implementation"> <a href="#a1-system-call-implementation" class="anchor-heading" aria-labelledby="a1-system-call-implementation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A.1: System Call Implementation</h4><ol><li>Implement <code class="language-plaintext highlighter-rouge">sys_getreadcount()</code> that returns the current number of bytes read by the <code class="language-plaintext highlighter-rouge">read()</code> syscall.<li>Handle overflow by wrapping around to 0.</ol><h4 id="a2-user-program"> <a href="#a2-user-program" class="anchor-heading" aria-labelledby="a2-user-program"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A.2: User Program</h4><p>Create a user program <code class="language-plaintext highlighter-rouge">readcount.c</code> that:</p><ol><li>Calls <code class="language-plaintext highlighter-rouge">getreadcount()</code> and prints the initial value<li>Reads 100 bytes from a file<li>Calls <code class="language-plaintext highlighter-rouge">getreadcount()</code> again and verifies the increase</ol><h2 id="part-b---completely-fair-scheduler"> <a href="#part-b---completely-fair-scheduler" class="anchor-heading" aria-labelledby="part-b---completely-fair-scheduler"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Part B - Completely Fair Scheduler</h2><p>You need to implement a simplified version of the Completely Fair Scheduler (CFS) in xv6. The CFS is designed to provide fair CPU time distribution among processes.</p><h3 id="background"> <a href="#background" class="anchor-heading" aria-labelledby="background"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Background</h3><p>The default scheduling policy in xv6 is round-robin-based. In this task, you’ll implement two other scheduling policies and incorporate them in xv6. The kernel should only use one scheduling policy declared at compile time, with a default of round robin in case none are specified.</p><p>Modify the makefile to support the SCHEDULER macro to compile the specified scheduling algorithm. Use the flags for compilation:- First Come First Serve: FCFS COmpletely Fair Scheduler: CFS</p><h2 id="first-come-first-serve-marks-20"> <a href="#first-come-first-serve-marks-20" class="anchor-heading" aria-labelledby="first-come-first-serve-marks-20"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> First Come First Serve [Marks 20]</h2><p>we will modify the xv6 scheduler from strict round-robin to a firstcome-first-server (FCFS) scheduler. This will involve using the creation time entrying in the process control block that was added in part A. We will modify the scheduler function (kernel/proc.c). Scheduler will first have to find a RUNNABLE process with the earliest creation time. The process with the earliest arrival time is the process with the highest priority and therefor the process that is selected for execution. Only when the currently RUNNING process terminates is another process selected to RUN. It is suggested that you comment out the original round-robin scheduler code before adding your new version of the scheduler.</p><p>Your compilation process should look something like this: make clean; make qemu SCHEDULER=FCFS. Hints:</p><p>Use pre-processor directives to declare the alternate scheduling policy in scheduler() in kernel/proc.h. Edit struct proc in kernel/proc.h to add information about a process. Modify the allocproc() function to set up values when the process starts (see kernel/proc.h.)</p><p>NOTE procdump: This will be useful for debugging ( refer kernel/proc.c ). It prints a list of processes to the console when a user types Ctrl-P on the console. You can modify this functionality to print the state of the running process and display the other relevant information on the console.</p><p>Use the procdump function to print the current status of the processes and check whether the processes are scheduled according to your logic. You are free to do any additions to the given file, to test your scheduler.</p><p>You need to implement a simplified version of the Completely Fair Scheduler (CFS) in xv6. The CFS is designed to provide fair CPU time distribution among processes.</p><h3 id="background-1"> <a href="#background-1" class="anchor-heading" aria-labelledby="background-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Background</h3><p>The default xv6 scheduler uses a simple round-robin algorithm. Your task is to replace it with a simplified CFS that maintains fairness by tracking how much CPU time each process has received.</p><p>Your compilation process should look something like this: make clean; make qemu SCHEDULER=CFS.</p><h3 id="requirements-14"> <a href="#requirements-14" class="anchor-heading" aria-labelledby="requirements-14"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Requirements</h3><h4 id="b1-priority-support-marks-10"> <a href="#b1-priority-support-marks-10" class="anchor-heading" aria-labelledby="b1-priority-support-marks-10"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> B.1: Priority Support [Marks 10]</h4><ol><li>Add a nice value for each process.<li>Calculate the system weight based on nice value:<ul><li>Nice 0: weight = 1024<li>Nice -20: weight = 88761 (highest priority)<li>Nice 19: weight = 15 (lowest priority)<li>Use this approximation: <code class="language-plaintext highlighter-rouge">weight = 1024 / (1.25 ^ nice)</code></ul></ol><h4 id="b2-virtual-runtime-tracking-marks-20"> <a href="#b2-virtual-runtime-tracking-marks-20" class="anchor-heading" aria-labelledby="b2-virtual-runtime-tracking-marks-20"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> B.2: Virtual Runtime Tracking [Marks 20]</h4><ol><li>Track the <strong>virtual runtime</strong> of each process. A processes virtual runtime represents the amount of CPU time a process has consumed, normalized by the system weight.<li>Initialize <code class="language-plaintext highlighter-rouge">vruntime</code> to 0 when a process is created.<li>Update <code class="language-plaintext highlighter-rouge">vruntime</code> by the number of ticks the process runs during each time slice.</ol><h4 id="b2-scheduling-marks-50"> <a href="#b2-scheduling-marks-50" class="anchor-heading" aria-labelledby="b2-scheduling-marks-50"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> B.2: Scheduling [Marks 50]</h4><ol><li>Maintain processes in order of their <code class="language-plaintext highlighter-rouge">vruntime</code> (ascending order).<li>Always schedule the runnable process with the smallest <code class="language-plaintext highlighter-rouge">vruntime</code>.<li>When a process becomes runnable, insert it in the correct position based on <code class="language-plaintext highlighter-rouge">vruntime</code>.</ol><h4 id="b3-time-slice-calculation-marks-20"> <a href="#b3-time-slice-calculation-marks-20" class="anchor-heading" aria-labelledby="b3-time-slice-calculation-marks-20"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> B.3: Time Slice Calculation [Marks 20]</h4><ol><li>Define a target latency of 48 ticks.<li>Calculate a time slice as: <code class="language-plaintext highlighter-rouge">time_slice = target_latency / number_of_runnable_processes</code><li>Enforce a minimum time slice of 3 ticks.<li>Each process runs for its calculated time slice before being preempted.</ol><h2 id="report-marks-20"> <a href="#report-marks-20" class="anchor-heading" aria-labelledby="report-marks-20"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Report [Marks 20]</h2><p>In your implementation, add logging to print the vRuntime of all runnable processes before every scheduling decision. The log should clearly indicate:</p><ul><li><p>Process ID (PID) of each runnable process.</p><li><p>vRuntime value for each process at that moment.</p><li><p>Which process is selected by the scheduler (should be the one with the lowest vRuntime).</p></ul><p>Your log output should allow us to verify that:</p><ul><li><p>The process with the smallest vRuntime is being chosen by the scheduler.</p><li><p>vRuntime values are updating correctly after each time slice.</p></ul><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Scheduler Tick]
PID: 3 | vRuntime: 200
PID: 4 | vRuntime: 150
PID: 5 | vRuntime: 180
--&gt; Scheduling PID 4 (lowest vRuntime)
</code></pre></div></div><p>The report also must contain brief explanation about the implementation of the specifications. A few lines about your changes for each spec is fine. Include the performance comparison between the default(Round Robin), FCFS and CFS scheduling policies by showing the average waiting and running times for processes. Set the processes to run on only 1 CPU for this purpose. Use the schedulertest command to get this information.</p><h1 id="bonus-simplified-preemptive-mlfq-scheduler-for-xv6-25-marks"> <a href="#bonus-simplified-preemptive-mlfq-scheduler-for-xv6-25-marks" class="anchor-heading" aria-labelledby="bonus-simplified-preemptive-mlfq-scheduler-for-xv6-25-marks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Bonus: Simplified Preemptive MLFQ Scheduler for XV6 (25 Marks)</h1><p><code class="language-plaintext highlighter-rouge">Important</code>: This bonus counts towards the overall bonus for the course not particular to this assignment.</p><h3 id="queues--priorities"> <a href="#queues--priorities" class="anchor-heading" aria-labelledby="queues--priorities"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Queues &amp; Priorities:</h3><h4 id="four-priority-queues-0-highest--3-lowest"> <a href="#four-priority-queues-0-highest--3-lowest" class="anchor-heading" aria-labelledby="four-priority-queues-0-highest--3-lowest"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Four priority queues: 0 (highest) → 3 (lowest).</h4><h5 id="time-slices"> <a href="#time-slices" class="anchor-heading" aria-labelledby="time-slices"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Time slices:</h5><ul><li><p>Queue 0 → 1 tick</p><li><p>Queue 1 → 4 ticks</p><li><p>Queue 2 → 8 ticks</p><li><p>Queue 3 → 16 ticks</p></ul><h3 id="scheduling-rules"> <a href="#scheduling-rules" class="anchor-heading" aria-labelledby="scheduling-rules"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Scheduling Rules:</h3><ul><li><p>New Processes: Start in queue 0 (end of queue).</p><li><p>Priority Selection: Always schedule from the highest non-empty queue. If a process is running from a lower queue and a process arrives in a higher queue, preempt the current one at the next tick.</p><li><p>Time Slice Expiry: If a process uses its full time slice, move it to the end of the next lower queue (unless already in queue 3, then keep it there).</p><li><p>Voluntary Yield (I/O bound): On yielding before its slice ends, re-enter at the end of the same queue when ready.</p><li><p>Lowest Priority Queue: Use round-robin scheduling.</p><li><p>Starvation Prevention: Every 48 ticks, move all processes to queue 0 to prevent starvation.</p><li><p>Completed processes should leave the system.</p><li><p>Report: Also if you’ve attempted this section then in the previously mentioned report add comparision for MLFQ as well.</p></ul><p><code class="language-plaintext highlighter-rouge">Notes</code>:</p><ul><li>“Tick” refers to the clock interrupt timer in kernel/trap.c.<li>Preemption can only occur at tick boundaries.</ul><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mini-project1/
├── shell/
│   ├── src/
│   ├── include/
│   └── Makefile
├── networking/
│   ├── client.c
│   ├── server.c
│   ├── sham.h       # Or other shared headers
│   └── Makefile
├── xv6/
│   ├── xv6_modifications.patch
│   ├── readcount.c
│   └── report.md    # Or report.pdf
├── llm_completions/ # (If you used an LLM for any part)
│   ├── shell_prompt_1.png
│   ├── networking_q1.png
│   └── ...
└── README.md
</code></pre></div></div><hr><footer><p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2024 Karthik Vaidhyanathan. Distributed by an <a href="https://github.com/just-the-docs/just-the-docs/tree/main/LICENSE.txt">MIT license.</a></p></footer></div></div><div class="search-overlay"></div></div>
